(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{41111:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}});var r=t(73912),o=t(34376),u=t(28598);function i(){var e=(0,o.useRouter)(),n=(0,r.Z)(),t=n.data,i=n.isLoading;return!t||i?(0,u.jsx)("div",{children:"...loading"}):(e.replace("/user/".concat(t.userId)),(0,u.jsx)(u.Fragment,{}))}},2310:function(e,n,t){"use strict";t.d(n,{_J:function(){return f},hP:function(){return l},kS:function(){return p}});var r,o=t(77837),u=t(38860),i=t.n(u),s=t(47384),a=t(46392),c=t(73380),d=a.ZP.create({baseURL:"".concat("https://dev.cogito.shop","/api"),timeout:3e3,withCredentials:!0});d.interceptors.request.use((r=(0,o.Z)(i().mark(function e(n){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.le)("accessToken",""),n.headers&&t&&(n.headers.Authorization="Bearer ".concat(t)),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}));var l=function(e,n){return c.D.get("/auth/".concat(e,"/login/token?code=").concat(n)).then(function(e){return null==e?void 0:e.data})},f=function(){return d.post("/auth/reissue").then(function(e){return null==e?void 0:e.data})},p=function(){return c.D.post("/auth/logout").then(function(){return console.log("로그아웃 되었습니다.")})}},73380:function(e,n,t){"use strict";t.d(n,{D:function(){return v},W:function(){return w}});var r,o,u=t(77837),i=t(38860),s=t.n(i),a=t(46392),c=t(92083),d=t.n(c),l=t(47384),f=t(2310),p=t(73788),v=a.ZP.create({baseURL:"".concat("https://dev.cogito.shop","/api"),timeout:3e3,withCredentials:!0,headers:{}}),h=(r=(0,u.Z)(s().mark(function e(){var n,t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f._J)();case 3:t=e.sent.accessToken,(0,l.D$)("accessToken",t),(0,l.D$)("expiresAt",d()().add(60,"minutes").format("yyyy-MM-DD HH:mm:ss")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),window.localStorage.removeItem("accessToken"),window.localStorage.removeItem("expiresAt");case 13:case"end":return e.stop()}},e,null,[[0,9]])})),function(){return r.apply(this,arguments)});v.interceptors.request.use((o=(0,u.Z)(s().mark(function e(n){var t,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,l.le)("expiresAt",d()().utc(!0).format("yyyy-MM-DD HH:mm:ss")),!(n.headers&&20>=d()(t).diff(d()(),"minutes"))){e.next=4;break}return e.next=4,h();case 4:return r=(0,l.le)("accessToken",""),n.headers&&r&&(n.headers.Authorization="Bearer ".concat(r)),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),v.interceptors.response.use(function(e){return e},function(e){var n,t,r,o,u,i,s;if((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.code)==="A008"){window.alert("로그인이 필요합니다");return}if(["A011","A012"].includes(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.code)){p.ZP.remove("refreshToken"),window.alert("토큰이 만료되어 로그아웃 되었습니다. 다시 로그인 해주세요.");return}console.log("csr axios error : ",e),window.alert(null!==(u=null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)&&void 0!==u?u:null==e?void 0:e.message)});var w=a.ZP.create({baseURL:"".concat("https://dev.cogito.shop","/api"),timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}});w.interceptors.response.use(function(e){return e},function(e){throw console.log("ssr axios error : ",e),Error(e)})},43608:function(e,n,t){"use strict";t.d(n,{$L:function(){return o},EC:function(){return u},Rf:function(){return i}});var r=t(73380),o=function(){return r.D.get("/users/me").then(function(e){return null==e?void 0:e.data})},u=function(e){return r.W.get("/users/".concat(e)).then(function(e){return null==e?void 0:e.data})},i=function(e){var n=e.query,t=e.page;return r.W.get("/users",{params:{query:n,page:t}}).then(function(e){return null==e?void 0:e.data})}},73912:function(e,n,t){"use strict";t.d(n,{l:function(){return u}});var r=t(43608),o=t(39720),u="useMyQuery",i=function(){return(0,o.a)([u],r.$L)};n.Z=i},96004:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my",function(){return t(41111)}])}},function(e){e.O(0,[217,720,774,888,179],function(){return e(e.s=96004)}),_N_E=e.O()}]);