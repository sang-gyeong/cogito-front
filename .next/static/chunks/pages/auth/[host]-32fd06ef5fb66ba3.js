(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{2559:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return p}});var r=t(77837),o=t(38860),u=t.n(o),i=t(2310),s=t(82684),a=t(34376),c=t(47384),l=t(92083),d=t.n(l),f=t(28598);function p(){var n,e,t,o=(0,a.useRouter)(),l=null===(n=o.query)||void 0===n?void 0:n.host,p=null===(e=o.query)||void 0===e?void 0:e.code,h=(t=(0,r.Z)(u().mark(function n(e,t){var r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!e||!t)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,(0,i.hP)(e,t);case 4:if(r=n.sent){n.next=9;break}return window.alert("로그인에 실패하였습니다.\n잠시 후에 다시 시도해주세요"),o.replace("/login"),n.abrupt("return");case 9:(0,c.D$)("accessToken",r.accessToken),(0,c.D$)("expiresAt",d()().add(30,"minutes").format("yyyy-MM-DD HH:mm:ss")),r.registered||o.replace("/my"),o.replace("/");case 13:case"end":return n.stop()}},n)})),function(n,e){return t.apply(this,arguments)});return(0,s.useEffect)(function(){l&&p&&h(l,p)}),(0,f.jsx)(f.Fragment,{})}},2310:function(n,e,t){"use strict";t.d(e,{hP:function(){return o},kS:function(){return u}});var r=t(73380),o=function(n,e){return r.D2.get("/auth/".concat(n,"/login/token?code=").concat(e)).then(function(n){return null==n?void 0:n.data})},u=function(){return r.D2.post("/auth/logout").then(function(){return console.log("로그아웃 되었습니다.")})}},73380:function(n,e,t){"use strict";t.d(e,{D2:function(){return d},NJ:function(){return p},Rf:function(){return h},We:function(){return f}});var r,o=t(77837),u=t(38860),i=t.n(u),s=t(46392),a=t(92083),c=t.n(a),l=t(47384),d=s.ZP.create({baseURL:"".concat("https://dev.cogito.shop","/api"),timeout:3e3,withCredentials:!0,headers:{}});d.interceptors.request.use((r=(0,o.Z)(i().mark(function n(e){var t,r;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,l.le)("expiresAt",c()().format("yyyy-MM-DD HH:mm:ss")),c()(t).diff(c()()),r=(0,l.le)("accessToken",""),e.headers&&r&&(e.headers.Authorization="Bearer ".concat(r)),n.abrupt("return",e);case 5:case"end":return n.stop()}},n)})),function(n){return r.apply(this,arguments)})),d.interceptors.response.use(function(n){return n},function(n){var e,t,r,o,u;if(["A008","A011","A012","A013"].includes(null==n?void 0:null===(e=n.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.code)){null==globalThis||globalThis.localStorage.clear(),window.alert("로그인이 필요합니다.");return}console.log("csr axios error : ",n),window.alert(null!==(r=null==n?void 0:null===(o=n.response)||void 0===o?void 0:null===(u=o.data)||void 0===u?void 0:u.message)&&void 0!==r?r:null==n?void 0:n.message)});var f=s.ZP.create({baseURL:"".concat("https://dev.cogito.shop","/api"),timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}});f.interceptors.response.use(function(n){return n},function(n){throw console.log("ssr axios error : ",n),Error(n)});var p=function(){return d.get("/tags").then(function(n){return null==n?void 0:n.data})},h=function(){return d.get("/users").then(function(n){return null==n?void 0:n.data})}},59501:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/[host]",function(){return t(2559)}])}},function(n){n.O(0,[828,774,888,179],function(){return n(n.s=59501)}),_N_E=n.O()}]);