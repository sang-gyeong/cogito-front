(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{2559:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return p}});var r=e(77837),u=e(38860),o=e.n(u),c=e(2310),i=e(82684),a=e(34376),s=e(47384),f=e(92083),d=e.n(f),h=e(73788),l=e(28598);function p(){var n,t,e,u=(0,a.useRouter)(),f=null===(n=u.query)||void 0===n?void 0:n.host,p=null===(t=u.query)||void 0===t?void 0:t.code,v=(e=(0,r.Z)(o().mark(function n(t,e){var r,i,a,f;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!t||!e)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,(0,c.h)(t,e);case 4:if(r=n.sent){n.next=9;break}return window.alert("로그인에 실패하였습니다.\n잠시 후에 다시 시도해주세요"),u.replace("/login"),n.abrupt("return");case 9:i=r.accessToken,a=r.refreshToken,h.ZP.save("refreshToken",a,{}),(0,s.D$)("accessToken",i),(0,s.D$)("expiresAt",d()().add(30,"minutes").format("yyyy-MM-DD HH:mm:ss")),f=(0,s.St)("currentPath")||"/",u.replace(f);case 15:case"end":return n.stop()}},n)})),function(n,t){return e.apply(this,arguments)});return(0,i.useEffect)(function(){f&&p&&v(f,p)}),(0,l.jsx)(l.Fragment,{})}},2310:function(n,t,e){"use strict";e.d(t,{_:function(){return o},h:function(){return u}});var r=e(73380),u=function(n,t){return r.ZP.get("/auth/".concat(n,"/login/token?code=").concat(t)).then(function(n){return null==n?void 0:n.data})},o=function(){return r.ZP.get("/auth/reissue").then(function(n){return null==n?void 0:n.data})}},73380:function(n,t,e){"use strict";e.d(t,{NJ:function(){return u},Rf:function(){return o}});var r=e(46392).ZP.create({baseURL:"".concat("https://dev.cogito.shop","/api"),timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}});t.ZP=r;var u=function(){return r.get("/tags").then(function(n){return null==n?void 0:n.data})},o=function(){return r.get("/users").then(function(n){return null==n?void 0:n.data})}},59501:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/[host]",function(){return e(2559)}])}},function(n){n.O(0,[217,774,888,179],function(){return n(n.s=59501)}),_N_E=n.O()}]);